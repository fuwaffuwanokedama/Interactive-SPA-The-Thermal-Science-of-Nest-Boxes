<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive SPA: The Thermal Science of Nest Boxes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Earth -->
    <!-- Application Structure Plan: The SPA is structured as a narrative journey, guiding the user from problem discovery to solution exploration. 1) The 'Introduction' hooks the user with the central conflict: nest boxes as potential "ecological traps." 2) The 'Comparative Analysis' section uses an interactive chart to visually demonstrate the fundamental thermal differences between natural cavities and artificial boxes, allowing users to grasp the core problem intuitively. 3) 'Biological Impacts' uses high-impact info cards to concisely convey the severe consequences of overheating. 4) 'Exploring Solutions' is designed as an interactive toolbox. Users can click on mitigation strategies to reveal detailed information (effectiveness, cost, ease of implementation) in a modal, promoting active learning and empowering them with actionable knowledge. 5) The 'Best Practices Protocol' concludes the journey by summarizing the key takeaways into a tiered, practical guide. This structure was chosen over a linear report format to maximize user engagement, facilitate understanding of complex data, and guide users toward practical application of the research findings. -->
    <!-- Visualization & Content Choices: 1) Comparative Analysis (Goal: Compare): An interactive bar chart was chosen to visually contrast the thermal performance (max temp, buffering capacity) of natural vs. artificial cavities. User interaction via buttons allows for active discovery of the performance gap (Implemented with Chart.js). 2) Biological Impacts (Goal: Inform): Key statistics like lethal thresholds and mortality rates are presented in high-contrast "stat cards" with icons. This makes the critical data immediately digestible without requiring users to parse dense text (Implemented with HTML/Tailwind). 3) Mitigation Strategies (Goal: Organize & Compare): An interactive list allows users to explore various solutions. Clicking an item opens a modal with a structured breakdown of its effectiveness, cost, and mechanism. This multi-faceted presentation enables users to compare solutions based on various criteria (Implemented with Vanilla JS). These choices adhere to the NO SVG/Mermaid constraint by using Canvas and structured HTML/CSS for all dynamic and static visuals. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF5;
            color: #4A4A4A;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 45vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #A0522D;
            border-bottom-color: #A0522D;
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="text-xl font-bold text-[#6B4F4B]">
                The Thermal Science of Nest Boxes
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#comparison" class="nav-link pb-1">Comparison</a>
                <a href="#impact" class="nav-link pb-1">Impacts</a>
                <a href="#solutions" class="nav-link pb-1">Solutions</a>
                <a href="#protocol" class="nav-link pb-1">Protocol</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4 space-y-2">
            <a href="#comparison" class="block nav-link">Comparison</a>
            <a href="#impact" class="block nav-link">Impacts</a>
            <a href="#solutions" class="block nav-link">Solutions</a>
            <a href="#protocol" class="block nav-link">Protocol</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">

        <section id="intro" class="text-center mb-20">
            <h1 class="text-4xl md:text-5xl font-bold text-[#6B4F4B] mb-4">When Good Intentions Become a Trap</h1>
            <p class="text-lg md:text-xl max-w-3xl mx-auto text-gray-600">
                Artificial nest boxes are a vital tool for wildlife conservation. Yet, in a warming world, they can reach lethal temperatures, unintentionally creating "ecological traps." This application explores the science behind nest box overheating and uncovers the solutions for a safer future.
            </p>
        </section>

        <section id="comparison" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#6B4F4B]">A Tale of Two Cavities: Natural vs. Artificial</h2>
            <p class="text-center max-w-3xl mx-auto text-gray-600 mb-8">
                Why are artificial nest boxes so prone to overheating? The answer lies in their fundamental structural differences from natural tree cavities. The chart below visualizes the critical disparity in their thermal performance. Click the buttons to switch between metrics and see the data for yourself.
            </p>
            <div class="text-center mb-6">
                <button id="tempBtn" class="bg-[#A0522D] text-white px-4 py-2 rounded-md shadow hover:bg-[#8B4513] transition-colors">Max Temperature</button>
                <button id="bufferBtn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md shadow hover:bg-gray-300 transition-colors ml-4">Buffering Capacity</button>
            </div>
            <div class="bg-white p-4 sm:p-6 rounded-xl shadow-lg">
                <div class="chart-container">
                    <canvas id="comparisonChart"></canvas>
                </div>
            </div>
        </section>

        <section id="impact" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#6B4F4B]">The Biological Cost of Heat</h2>
            <p class="text-center max-w-3xl mx-auto text-gray-600 mb-12">
                Excessive heat inside a nest box isn't just uncomfortable‚Äîit impairs nestling growth and can be directly lethal. These are the severe consequences that occupants pay when their home becomes an oven.
            </p>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg text-center transform hover:scale-105 transition-transform">
                    <div class="text-5xl mb-4">üå°Ô∏è</div>
                    <h3 class="text-xl font-bold mb-2">Lethal Threshold</h3>
                    <p class="text-gray-600">Internal temperatures exceeding <span class="font-bold text-red-600 text-lg">41¬∞C (107¬∞F)</span> are widely recognized as lethal to the eggs and nestlings of many species.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg text-center transform hover:scale-105 transition-transform">
                    <div class="text-5xl mb-4">üìâ</div>
                    <h3 class="text-xl font-bold mb-2">Mortality Rate</h3>
                    <p class="text-gray-600">In one experiment, nestling mortality in hot, unshaded boxes reached <span class="font-bold text-red-600 text-lg">55%</span> during a heatwave‚Äîmore than five times higher than in shaded boxes.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg text-center transform hover:scale-105 transition-transform">
                    <div class="text-5xl mb-4">‚öñÔ∏è</div>
                    <h3 class="text-xl font-bold mb-2">Impaired Growth</h3>
                    <p class="text-gray-600">Nestlings raised in hotter boxes were found to be <span class="font-bold text-orange-600 text-lg">3.3% lower in weight</span> at fledging, a critical factor for their future survival.</p>
                </div>
            </div>
        </section>

        <section id="solutions" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#6B4F4B]">Exploring Solutions: Engineering a Cooler Cavity</h2>
            <p class="text-center max-w-3xl mx-auto text-gray-600 mb-12">
                Fortunately, a range of effective, evidence-based mitigation strategies exist. Click on any strategy in the interactive list below to learn more about its effectiveness, cost, and implementation.
            </p>
            <div class="bg-white p-4 sm:p-6 rounded-xl shadow-lg">
                <ul id="solution-list" class="space-y-4">
                </ul>
            </div>
        </section>
        
        <section id="protocol" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#6B4F4B]">A Climate-Resilient Nest Box Protocol</h2>
            <p class="text-center max-w-3xl mx-auto text-gray-600 mb-12">
                Integrating all the findings, we can establish a tiered set of best practices for designing and managing nest boxes that are resilient to a changing climate.
            </p>
            <div class="space-y-8">
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-[#A0522D]">
                    <h3 class="text-xl font-bold mb-2">Tier 1: Essential for All Boxes</h3>
                    <ul class="list-disc list-inside text-gray-600 space-y-1">
                        <li><span class="font-semibold">Materials & Construction:</span> Use wood with a thickness of at least 1.9 cm (¬æ inch).</li>
                        <li><span class="font-semibold">Color:</span> Paint the exterior a white or light color.</li>
                        <li><span class="font-semibold">Basic Features:</span> Ensure proper drainage holes and ventilation slots near the top.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-[#D2B48C]">
                    <h3 class="text-xl font-bold mb-2">Tier 2: Highly Recommended in Hot Climates</h3>
                    <ul class="list-disc list-inside text-gray-600 space-y-1">
                        <li><span class="font-semibold">Siting:</span> Strategically select a location that receives afternoon shade.</li>
                        <li><span class="font-semibold">Orientation:</span> If shade is unavailable, orient the entrance to the north or east.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-[#8B4513]">
                    <h3 class="text-xl font-bold mb-2">Tier 3: Optimal/Advanced for High-Risk Areas</h3>
                    <ul class="list-disc list-inside text-gray-600 space-y-1">
                        <li><span class="font-semibold">Advanced Design:</span> Install a double roof or a permanent heat shield.</li>
                        <li><span class="font-semibold">Insulation:</span> Consider adding internal insulation.</li>
                        <li><span class="font-semibold">Monitoring:</span> Regularly monitor internal temperatures to adapt management strategies.</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>
    
    <footer class="bg-gray-100 mt-20">
        <div class="container mx-auto px-6 py-8 text-center text-gray-600">
            <p>This application is based on data from the research paper "Hot nests in a warm world."</p>
            <p class="text-sm mt-2">Promoting data-driven conservation for a better coexistence with wildlife.</p>
        </div>
    </footer>

    <div id="solutionModal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-xl w-full max-w-lg p-6 transform scale-95">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modalTitle" class="text-2xl font-bold text-[#6B4F4B]"></h3>
                <button id="closeModal" class="text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
            </div>
            <div id="modalBody">
                <p id="modalDescription" class="text-gray-600 mb-4"></p>
                <div class="border-t pt-4">
                    <h4 class="font-bold mb-2">Evaluation</h4>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <p class="font-semibold">Thermal Effectiveness:</p>
                            <p id="modalEffectiveness" class="text-[#A0522D] font-bold"></p>
                        </div>
                        <div>
                            <p class="font-semibold">Estimated Cost:</p>
                            <p id="modalCost"></p>
                        </div>
                        <div>
                            <p class="font-semibold">Ease of Retrofitting:</p>
                            <p id="modalRetrofit"></p>
                        </div>
                        <div>
                            <p class="font-semibold">Primary Mechanism:</p>
                            <p id="modalMechanism"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            const navLinks = document.querySelectorAll('a[href^="#"]');
            navLinks.forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    if (mobileMenu.classList.contains('hidden') === false) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });

            const comparisonData = {
                temperature: {
                    labels: ['Natural Cavity', 'Artificial Nest Box'],
                    datasets: [{
                        label: 'Maximum Recorded Temperature (¬∞C)',
                        data: [38, 52],
                        backgroundColor: ['#A0522D', '#D2B48C'],
                        borderColor: ['#8B4513', '#C19A6B'],
                        borderWidth: 1
                    }]
                },
                buffering: {
                    labels: ['Natural Cavity', 'Artificial Nest Box'],
                    datasets: [{
                        label: 'Relative Buffering Capacity',
                        data: [3.0, 1.0],
                        backgroundColor: ['#A0522D', '#D2B48C'],
                        borderColor: ['#8B4513', '#C19A6B'],
                        borderWidth: 1
                    }]
                }
            };

            const ctx = document.getElementById('comparisonChart').getContext('2d');
            let comparisonChart = new Chart(ctx, {
                type: 'bar',
                data: comparisonData.temperature,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Maximum Recorded Temperature',
                            font: { size: 16, family: "'Inter', sans-serif" },
                            color: '#4A4A4A'
                        },
                        tooltip: {
                            callbacks: {
                                label: (context) => `${context.dataset.label}: ${context.parsed.y}¬∞C`
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Temperature (¬∞C)',
                                font: { family: "'Inter', sans-serif" },
                                color: '#4A4A4A'
                            }
                        },
                        x: {
                             ticks: {
                                font: { family: "'Inter', sans-serif" },
                                color: '#4A4A4A'
                             }
                        }
                    }
                }
            });

            const tempBtn = document.getElementById('tempBtn');
            const bufferBtn = document.getElementById('bufferBtn');

            function updateChart(dataType) {
                if (dataType === 'temperature') {
                    comparisonChart.data = comparisonData.temperature;
                    comparisonChart.options.plugins.title.text = 'Maximum Recorded Temperature';
                    comparisonChart.options.scales.y.title.text = 'Temperature (¬∞C)';
                    comparisonChart.options.plugins.tooltip.callbacks.label = (context) => `${context.dataset.label}: ${context.parsed.y}¬∞C`;
                    tempBtn.className = 'bg-[#A0522D] text-white px-4 py-2 rounded-md shadow hover:bg-[#8B4513] transition-colors';
                    bufferBtn.className = 'bg-gray-200 text-gray-700 px-4 py-2 rounded-md shadow hover:bg-gray-300 transition-colors ml-4';
                } else {
                    comparisonChart.data = comparisonData.buffering;
                    comparisonChart.options.plugins.title.text = 'Thermal Buffering Capacity';
                    comparisonChart.options.scales.y.title.text = 'Relative Buffering (x-factor)';
                    comparisonChart.options.plugins.tooltip.callbacks.label = (context) => `${context.dataset.label}: ${context.parsed.y}x`;
                    bufferBtn.className = 'bg-[#A0522D] text-white px-4 py-2 rounded-md shadow hover:bg-[#8B4513] transition-colors ml-4';
                    tempBtn.className = 'bg-gray-200 text-gray-700 px-4 py-2 rounded-md shadow hover:bg-gray-300 transition-colors';
                }
                comparisonChart.update();
            }

            tempBtn.addEventListener('click', () => updateChart('temperature'));
            bufferBtn.addEventListener('click', () => updateChart('buffering'));

            const solutions = [
                 { id: 'heatshield', title: 'Double Roof / Heat Shield', icon: 'üõ°Ô∏è', description: 'Installing a second roof or a heat shield above the primary roof with an air gap is highly effective. The external shield physically blocks direct sunlight, preventing the primary roof from heating up.', effectiveness: 'Very High (up to 5.6¬∞C cooler)', cost: 'Medium', retrofit: 'Moderate', mechanism: 'Radiation, Convection' },
                { id: 'paint', title: 'Light-Colored Paint', icon: 'üé®', description: 'Painting the exterior of a nest box a white or light color is one of the simplest and most effective measures. Light colors reflect sunlight and suppress heat absorption.', effectiveness: 'High (up to 4.4¬∞C cooler)', cost: 'Low', retrofit: 'Easy', mechanism: 'Radiation' },
                { id: 'ventilation', title: 'Proper Ventilation', icon: 'üí®', description: 'Incorporating ventilation slots near the top of the box allows hot air to escape through natural convection, preventing heat buildup inside.', effectiveness: 'Moderate (up to 3.3¬∞C cooler)', cost: 'Low', retrofit: 'Easy', mechanism: 'Convection' },
                { id: 'insulation', title: 'Internal Insulation', icon: 'üß±', description: 'Adding insulation materials like polystyrene foam to the inside of the walls or roof is very effective at mitigating extreme temperatures and avoiding lethal highs.', effectiveness: 'Very High (avoids extreme highs)', cost: 'Medium-High', retrofit: 'Moderate', mechanism: 'Conduction, Radiation' },
                { id: 'doublewall', title: 'Double-Wall Construction', icon: 'üè¢', description: 'Creating an air gap between inner and outer walls uses the air as an insulator, preventing heat from the outer wall from reaching the nesting chamber. Most effective for new builds.', effectiveness: 'Very High', cost: 'High (for new boxes)', retrofit: 'Difficult', mechanism: 'Conduction, Radiation, Convection' },
                { id: 'thickness', title: 'Increased Wall Thickness', icon: 'üìè', description: 'Thicker walls provide better insulation. Using wood that is at least 1.9 cm (¬æ inch) thick is recommended over thinner materials.', effectiveness: 'Moderate', cost: 'Medium (for new boxes)', retrofit: 'Difficult', mechanism: 'Conduction' }
            ];

            const solutionList = document.getElementById('solution-list');
            solutions.forEach(solution => {
                const li = document.createElement('li');
                li.className = 'solution-item p-4 border rounded-lg flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors';
                li.dataset.id = solution.id;
                li.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-3xl mr-4">${solution.icon}</span>
                        <span class="font-bold text-lg">${solution.title}</span>
                    </div>
                    <span class="text-gray-400">‚Üí</span>
                `;
                solutionList.appendChild(li);
            });

            const modal = document.getElementById('solutionModal');
            const closeModalBtn = document.getElementById('closeModal');
            
            solutionList.addEventListener('click', (e) => {
                const item = e.target.closest('.solution-item');
                if (item) {
                    const solutionId = item.dataset.id;
                    const solutionData = solutions.find(s => s.id === solutionId);
                    openModal(solutionData);
                }
            });

            function openModal(data) {
                document.getElementById('modalTitle').textContent = data.title;
                document.getElementById('modalDescription').textContent = data.description;
                document.getElementById('modalEffectiveness').textContent = data.effectiveness;
                document.getElementById('modalCost').textContent = data.cost;
                document.getElementById('modalRetrofit').textContent = data.retrofit;
                document.getElementById('modalMechanism').textContent = data.mechanism;
                
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    modal.querySelector('.modal-content').classList.remove('scale-95');
                }, 10);
            }

            function closeModal() {
                modal.classList.add('opacity-0');
                modal.querySelector('.modal-content').classList.add('scale-95');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }

            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

        });
    </script>
</body>
</html>
